<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module RoadToElDuration::Calculations - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/navigation.js" defer></script>
<script src="../js/search.js" defer></script>
<script src="../js/search_index.js" defer></script>
<script src="../js/searcher.js" defer></script>
<script src="../js/darkfish.js" defer></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search (/) for a class, method, ..." spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    
    
<div id="extends-section" class="nav-section">
  <h3>Extended With Modules</h3>

  <ul class="link-list">
    <li><span class="extend">ActiveSupport::Concern</span>
  </ul>
</div>

    
<!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    <li ><a href="#method-i-calculates_duration_from">#calculates_duration_from</a>
    <li ><a href="#method-i-update_any_parent_durations">#update_any_parent_durations</a>
    <li ><a href="#method-i-update_duration-21">#update_duration!</a>
    <li ><a href="#method-i-updates_duration_of">#updates_duration_of</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-RoadToElDuration::Calculations">
  <h1 id="module-RoadToElDuration::Calculations" class="module">
    module RoadToElDuration::Calculations
  </h1>

  <section class="description">
    
  </section>

  <section id="5Buntitled-5D" class="documentation-section">





     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

      <div id="method-i-calculates_duration_from" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">calculates_duration_from</span><span
              class="method-args">(association_name, column: :duration)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>This class method is used to set the association that the duration will be calculated from. It also sets the column that will be used from the child records to calculate the duration of the parent. The default column is :duration but you can set it to any column that will be used to calculate the duration.</p>

          <div class="method-source-code" id="calculates_duration_from-source">
            <pre><span class="ruby-comment"># File lib/road_to_el_duration/calculations.rb, line 21</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">calculates_duration_from</span>(<span class="ruby-identifier">association_name</span>, <span class="ruby-value">column:</span> <span class="ruby-value">:duration</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">duration_association</span> = <span class="ruby-identifier">association_name</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">duration_column</span> = <span class="ruby-identifier">column</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-update_any_parent_durations" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">update_any_parent_durations</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>This method is used to update the duration of the parent records. It will only update the parent records if the parent_to_update attribute is set. It will update the duration of the current parent record and any previous parent record if the record was transferred or removed from the collection.</p>

          <div class="method-source-code" id="update_any_parent_durations-source">
            <pre><span class="ruby-comment"># File lib/road_to_el_duration/calculations.rb, line 45</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">update_any_parent_durations</span>
  <span class="ruby-identifier">update_previous_parent_duration</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">transferred_or_removed_from_collection?</span>
  <span class="ruby-identifier">update_current_parent_duration</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">has_parent_record?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-update_duration-21" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">update_duration!</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>This method is used to update the duration of the record. It will sum the :duration_column of the associated records and update the :duration_column of the record. It is left as public API so that you can call it manually if needed.</p>

          <div class="method-source-code" id="update_duration-21-source">
            <pre><span class="ruby-comment"># File lib/road_to_el_duration/calculations.rb, line 36</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">update_duration!</span>
  <span class="ruby-identifier">duration_value</span>[<span class="ruby-identifier">send</span>(<span class="ruby-value">:duration_column</span>)] = <span class="ruby-identifier">calculate_duration</span>
  <span class="ruby-identifier">update!</span>(<span class="ruby-operator">**</span><span class="ruby-identifier">duration_value</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-updates_duration_of" class="method-detail ">
        <div class="method-header">
          <div class="method-heading">
            <span class="method-name">updates_duration_of</span><span
              class="method-args">(parent_association)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
        </div>

        <div class="method-description">
          <p>This class method is used to set the parent association that will be updated.</p>

          <div class="method-source-code" id="updates_duration_of-source">
            <pre><span class="ruby-comment"># File lib/road_to_el_duration/calculations.rb, line 27</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">updates_duration_of</span>(<span class="ruby-identifier">parent_association</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">parent_to_update</span> = <span class="ruby-identifier">parent_association</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.6.3.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

